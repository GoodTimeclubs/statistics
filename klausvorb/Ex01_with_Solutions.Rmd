---
title: "Intro to R — Practice Set (10 Exercises + Bonus)"
author: "Martin Simon"
output:
  html_document:
    toc: true
    toc_float: true
    df_print: paged
  pdf_document: default
geometry: margin=1in
fontsize: 11pt
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(comment = "#>", collapse = TRUE)
set.seed(1234)
```

This sheet contains 10 self‑contained exercises + one bonus exercise that mirror the core topics of *An Introduction to R*.

------------------------------------------------------------------------

## 1) Objects, Assignment, and Basic Arithmetic

Create two numeric objects `a <- 7.5` and `b <- 2`. Compute:

1.  `a + b`, `a - b`, `a * b`, `a / b`

2.  The integer quotient and remainder of dividing `a` by `b`.

3.  Replace `a` with `a^b`, then remove `b` from the workspace.

Solution

```{r}
a <- 7.5
b <- 2 
sum_val <- a + b
sub_val <- a - b
prod_val <- a * b
div_val <- a / b
list(sum = sum_val, difference = sub_val, product = prod_val, quotient = div_val)

# Integer arithmetic
int_quot <- a %/% b
remainder <- a %% b
c(int_quot = int_quot, remainder = remainder)

# Update a and remove b
a <- a^b
rm(b)
exists("b")  # should be FALSE
```

------------------------------------------------------------------------

## 2) Vectors and Vectorized Operations

Construct a numeric vector `x` of length 8 with the values `1:8`. Compute:

1.  `x^2 - 3*x + 2`

2.  The mean, variance, and standard deviation of `x`.

3.  A logical vector indicating which elements of `x` are even.

Solution

```{r}
x <- 1:8
poly <- x^2 - 3*x + 2
stats <- c(mean = mean(x), var = var(x), sd = sd(x))
iseven <- x %% 2 == 0
list(poly = poly, stats = stats, is_even = iseven)
```

------------------------------------------------------------------------

## 3) Subsetting and Recycling

Let `y <- c(10, 20, 30, 40, 50)`. Perform:

1.  Select elements 2 through 4.
2.  Exclude element 1.
3.  Add the vector `c(1,2)` to `y` and explain the result.

Solution

```{r}
y <- c(10, 20, 30, 40, 50)
sel <- y[2:4]
excl <- y[-1]
rec <- y + c(1, 2)  # recycled to c(1,2,1,2,1)
list(select_2_to_4 = sel, exclude_1 = excl, recycled_sum = rec)
```

Explanation: R recycles the shorter vector `c(1,2)` to match the length of `y`, so the operation is element‑wise with recycling.

------------------------------------------------------------------------

## 4) Factors and Tables

Create a character vector `sex <- c("male","female","female","male","male")` and convert it to a factor. Then produce a frequency table and a proportion table.

Solution

```{r}
sex <- c("male","female","female","male","male")
sex <- factor(sex)
counts <- table(sex)
props <- prop.table(counts)
list(counts = counts, proportions = round(props, 3))
```

------------------------------------------------------------------------

## 5) Matrices and Matrix Algebra

Create a 3×3 matrix `M` filled by rows with the numbers 1 to 9. Compute:

1.  `M %*% t(M)`

2.  Column sums and row means

3.  Extract the second column and replace the (3,3) entry with `0`.

Solution

```{r}
M <- matrix(1:9, nrow = 3, byrow = TRUE)
prod <- M %*% t(M)
col_sums <- colSums(M)
row_means <- rowMeans(M)
second_col <- M[, 2]
M[3, 3] <- 0
list(M_times_Mt = prod, colSums = col_sums, rowMeans = row_means, second_col = second_col, M_modified = M)
```

------------------------------------------------------------------------

## 6) Lists and Data Frames

Construct a list with components: a numeric vector `x <- rnorm(5)`, a character vector of your initials repeated 5 times, and the matrix `M` from exercise 5. Convert the list to a data frame where possible (hint: use `data.frame()` on compatible components). What happens to incompatible shapes?

Solution

```{r}
x <- rnorm(5)
initials <- rep("MS", 5)
M <- matrix(1:9, nrow = 3, byrow = TRUE)
L <- list(x = x, initials = initials, M = M)
# Only vector components of equal length can be formed into a data.frame directly
DF <- data.frame(x = x, initials = initials)
list(L = L, DF = DF)
```

Explanation: `data.frame()` requires columns (vectors) of the same length; matrices with different dimensions cannot be combined directly without reshaping.

------------------------------------------------------------------------

## 7) Reading/Writing and Basic Plotting

This is a preview - we will discuss linear models and least squares in detail later. Try to get a rough understanding of what is happening here, having this intuition will make your life easier later on.

Create a small data frame with `x = rnorm(10, 5, 2), y = rnorm(10, 10, 3)` and write it to a temporary CSV file, then read it back. Produce a scatter plot with a fitted least‑squares line.

Solution

```{r}
DF <- data.frame(id = 1:10, x = rnorm(10, 5, 2), y = rnorm(10, 10, 3))
fp <- tempfile(fileext = ".csv")
write.csv(DF, fp, row.names = FALSE)
DF2 <- read.csv(fp)

plot(DF2$x, DF2$y, pch = 19, main = "Scatter with LS line", xlab = "x", ylab = "y")
abline(lm(y ~ x, data = DF2))
```

------------------------------------------------------------------------

## 8) Control Flow and Functions

This is a preview - we will discuss mean, sd, etc. in detail later. Try to get a rough understanding of what is happening here, having this intuition will make your life easier later on.

Write a function `z_score(x)` that returns standardized values `(x - mean(x))/sd(x)` but warns if `sd(x) == 0`. Apply it to `c(5,5,5)` and to `c(1,2,3,4)`.

Solution

```{r}
z_score <- function(x) {
  s <- sd(x)
  if (s == 0) {
    warning("Standard deviation is zero; returning NA values.")
    return(rep(NA_real_, length(x)))
  }
  return (x - mean(x)) / s
}

z1 <- z_score(c(5,5,5))
z2 <- z_score(c(1,2,3,4))
list(equal_vals = z1, seq_vals = round(z2, 3))
```

------------------------------------------------------------------------

## 9) The *apply* Family

This is a preview - we will discuss quantiles, etc. in detail later. Try to get a rough understanding of what is happening here, having this intuition will make your life easier later on.

Using the built‑in dataset `mtcars`, compute for each column:

1.  The column mean with `sapply()`

2.  The 0.25 and 0.75 quantiles via `apply()`

3.  A new data frame with column means for groups defined by `cyl` using `aggregate()`

Solution

```{r}
data(mtcars)
col_means <- sapply(mtcars, mean)
qs <- apply(mtcars, 2, quantile, probs = c(0.25, 0.75))
by_cyl <- aggregate(. ~ cyl, data = mtcars, FUN = mean)
list(col_means = round(col_means, 3), quantiles = round(qs, 3), mean_by_cyl = by_cyl)
```

------------------------------------------------------------------------

## 10) Simple Linear Models and Diagnostics

This is a preview - we will discuss linear models in detail later. Try to get a rough understanding of what is happening here, having this intuition will make your life easier later on.

Simulate data from a linear model `y = 3 + 2x + e` where `x ~ N(0,1)` and `e ~ N(0,1)` for `n = 100`. Fit `lm(y ~ x)` and report the estimated coefficients, $R^2$, and residual standard error. Make a residuals vs fitted plot.

Solution

```{r}
n <- 100
x <- rnorm(n)
e <- rnorm(n)
y <- 3 + 2*x + e
fit <- lm(y ~ x)
s <- summary(fit)
coef_est <- coef(fit)
R2 <- s$r.squared
RSE <- s$sigma
list(coef = round(coef_est, 3), R2 = round(R2, 3), RSE = round(RSE, 3))

plot(fitted(fit), resid(fit), pch = 19,
     xlab = "Fitted values", ylab = "Residuals", main = "Residuals vs Fitted")
abline(h = 0, lty = 2)
```

------------------------------------------------------------------------

### Bonus (Optional): Distributions and Random Numbers

This is a preview - we will discuss sampling from distributions in detail later. Try to get a rough understanding of what is happening here, having this intuition will make your life easier later on.

1.  Simulate 10,000 draws from `N(0,1)` and plot a histogram; overlay a normal density.

2.  Use `set.seed()` to make results replicable and confirm that calling `rnorm(5)` twice with the same seed yields identical vectors.

Solution

```{r}
set.seed(42)
z <- rnorm(10000)
hist(z, breaks = 30, freq = FALSE, main = "N(0,1) draws")
curve(dnorm(x, 0, 1), add = TRUE)

set.seed(1); v1 <- rnorm(5)
set.seed(1); v2 <- rnorm(5)
identical(v1, v2)
```
